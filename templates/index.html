<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>The Galactic P2P Chatroom</title>

    <style>
        * { font-family:tahoma; font-size:12px; padding:0px; margin:0px; }
        p { line-height:18px; }
        div { width:500px; margin-left:auto; margin-right:auto;}
        #content { padding:5px; background:#ddd; border-radius:5px; overflow-y: scroll;
                   border:1px solid #CCC; margin-top:10px; height: 160px; }
        #input { border-radius:2px; border:1px solid #ccc;
                 margin-top:10px; padding:5px; width:400px;  }
        #status { width:88px; display:block; float:left; margin-top:15px; }
        #button { width:20px; display:block; float:right; margin-top:10px; }
    </style>
    <script type="text/javascript" src="static/socket.io/socket.io.js"></script>
    <script> 
    
        window.addEventListener('load', function() {             
            var output = document.getElementById('output');
            var input = document.getElementById('input');

            var port = 5000
            var socket = io(document.location.hostname + ":" + port);                     

            socket.on('connect', function(){
                socket.emit('init', {'message': 'galaxy'});
            });

         
            window.onunload = function(){
                 socket.close();
            }

            var input = document.getElementById('input');
	        input.onkeypress = function(e) {
		        if (e.keyCode == 13) {
                    var message = {};
                    message.payload = input.value;
                    console.log('Sending message', message);
                    socket.send(JSON.stringify(message));
                    return false;
                }
            };
        });
    </script>
    <body>
        <div id="content"></div>
        <div>
            <span id="status">Online</span>
            <input type="text" id="input" onkeypress="return "/>
        </div>
    </body>
</head>
</html>

